Restarted application in 561ms.
UPDATE_SERVICE: initialized | version=0.1.6, dir=D:\Repositories\Broker-App
UPDATE_SERVICE: env_snapshot | cwd=D:\Repositories\Broker-App, exe=D:\Repositories\Broker-App\build\windows\x64\runner\Debug\mat_finance.exe, os="Windows 10 Pro" 10.0 (Build 26100), dart=3.8.1 (stable) (Wed May 28 00:47:25 2025 -0700) on "windows_x64"
CLIENTS_SERVICE: load_clients_ms | ms=39
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/a2b1d891-4595-42fd-afc7-2487fdf1d7cf' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/ce8f2978-5d21-423b-96d4-e3e37bad4eea' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
[FIREBASE] MEETINGS: getAllMeetings loaded 0 in 142ms
FIREBASE_SERVICE: team_meetings_ms | ms=257, tokens=1
SPLASH_SERVICE: refresh_meetings_cache_ms | ms=403
📊 DASHBOARD_SERVICE: Loaded 1 consultants | isSupervisor: false | Teams excluded: 0
📊 DASHBOARD_SERVICE: Found teams (with base): [Echipa Andreea, Echipa Cristina, Echipa Scarlat]
📊 DASHBOARD_SERVICE: Loaded 3 teams | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loaded 3 teams from cache | isSupervisor: false
[FIREBASE] MEETINGS: getAllMeetings loaded 0 in 188ms
📊 SPLASH_SERVICE: Performance Metrics:
  Initializare servicii...: 9ms
  Preincarcare date...: 1937ms
  Sincronizare servicii...: 2ms
  Optimizare cache...: 0ms
  Finalizare...: 0ms
SPLASH: Current role: Consultant
🔄 SPLASH: Consultant/team changed, resetting state
🔧 SPLASH: Old consultant: null, New: f0d98059-254f-4b28-ba55-1f4dd5e9d1dc
🔧 SPLASH: Old team: null, New: Echipa Andreea
🔄 SPLASH: Reloading services for new consultant
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loaded 3 teams from cache | isSupervisor: false
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/963d7d9b-88a7-435d-b3c5-3031d16c354c' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/4c57e80d-0c13-4c3e-8289-246b0e979f1a' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
CLIENTS_SERVICE: load_clients_ms | ms=131
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
[FIREBASE] MEETINGS: getAllMeetings loaded 0 in 129ms
🔄 SPLASH: Invalidating cache with enhanced state management
✅ SPLASH: Cache invalidation completed successfully
✅ SPLASH: Services reloaded successfully for new consultant
✅ SPLASH: Consultant reset completed successfully
MAIN_SCREEN: init_state
MAIN_SCREEN: build_called
MAIN_SCREEN: post_frame_callback
MAIN_SCREEN: whats_new_check_start
UPDATE_SERVICE: release_info_missing | path=C:\Users\Home\AppData\Roaming\com.example\MAT Finance/updates/last_release.json
MAIN_SCREEN: whats_new_info_result | is_null=true
MAIN_SCREEN: whats_new_missing
🤖 LLM_SERVICE: No saved conversation found for consultant: f0d98059...
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
MAIN_SCREEN: build_called
🔄 FORM: No focused client at initialization
CLIENTS_SERVICE: load_clients_ms | ms=8
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
CLIENTS_SERVICE: load_clients_ms | ms=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔵 TEMP_CLIENT: createTemporaryClient called
🔵 TEMP_CLIENT: Current focused client before creation: null
🔵 TEMP_CLIENT: Temporary client created with ID: temp_1755188892002
🔵 TEMP_CLIENT: Temporary client focused and added to list
🔵 TEMP_CLIENT: Total clients in list: 1
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client:
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Client changed - Previous: none, Current:
⚡ FORM: Processing client change - Previous: none, Current:
⚡ FORM: Clearing controllers for client change
⚡ FORM: Skipping form data load for temporary client
⚡ FORM: Total client selection time: 0ms
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client:
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
MAIN_SCREEN: build_called
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="D" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="D" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: D
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 444.67ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 3
Active timers: 0
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Da" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="D" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Da" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Da
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dan" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Da" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dan" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dan
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dani" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Dan" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dani" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dani" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Dani" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dani" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
MAIN_SCREEN: build_called
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dani" phone1="0" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Dani" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dani" phone1="0" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dani" phone1="07" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Dani" phone1="0" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dani" phone1="07" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="07" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dani" phone1="078" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Dani" phone1="07" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dani" phone1="078" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="078" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dani" phone1="0782" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Dani" phone1="078" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dani" phone1="0782" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0782" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Dani" phone1="0782" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Dani" phone1="0782" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Dani" phone1="0782" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
🔵 TEMP_CLIENT: Finalizing client: Dani (0782)
MATCHER: Using clientKey="0782" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
➕ CLIENT: added - 0782 → Dani
🔄 FORM: Temporary client update - ignoring form reset
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔄 FORM: Temporary client update - ignoring form reset
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 444.67ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 3
Active timers: 0
🔵 TEMP_CLIENT: Firebase creation successful
🔵 TEMP_CLIENT: Client finalized successfully
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Dani
🔄 FORM: Client changed - Previous: , Current: 0782
⚡ FORM: Processing client change - Previous: , Current: 0782
⚡ FORM: Clearing controllers for client change
🔧 FORM_SERVICE: Cleared form data cache for client
🔧 FORM_AREA: Cleared form data cache for previous client
⚡ FORM: Loading form data for new client: 0782
🔄 CLIENT: category_change - 0782 → clienti
CLIENTS_SERVICE: load_clients_ms | ms=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔄 FORM: Client changed - Previous: , Current: none
⚡ FORM: Skipping redundant client change operation
✅ [FIREBASE_SUCCESS] getClient found matching client
✅ [FIREBASE_SUCCESS] getClient found matching client
[FIREBASE] GD_VERIFY: getClientForms called for 0782
[FIREBASE] GD_VERIFY: loaded 0 forms for 0782
⚡ FORM: Total client selection time: 253ms
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔄 FORM: Client changed - Previous: 0782, Current: none
⚡ FORM: Processing client change - Previous: 0782, Current: none
⚡ FORM: Saving form data for previous client: 0782
[FIREBASE] FORMS: saveAllFormDataBatched start for 0782
MAIN_SCREEN: build_called
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔄 FORM: Client changed - Previous: 0782, Current: none
⚡ FORM: Skipping redundant client change operation
✅ [FIREBASE_SUCCESS] FORMS: saveAllFormDataBatched success for 0782 in 182ms
⚡ FORM: Clearing controllers for client change
🔧 FORM_SERVICE: Cleared form data cache for client 0782
🔧 FORM_AREA: Cleared form data cache for previous client 0782
⚡ FORM: Total client selection time: 184ms
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔵 TEMP_CLIENT: createTemporaryClient called
🔵 TEMP_CLIENT: Current focused client before creation: null
🔵 TEMP_CLIENT: Temporary client created with ID: temp_1755188903944
🔵 TEMP_CLIENT: Temporary client focused and added to list
🔵 TEMP_CLIENT: Total clients in list: 2
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client:
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Client changed - Previous: none, Current:
⚡ FORM: Processing client change - Previous: none, Current:
⚡ FORM: Clearing controllers for client change
⚡ FORM: Skipping form data load for temporary client
⚡ FORM: Total client selection time: 0ms
MAIN_SCREEN: build_called
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client:
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="E" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="E" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: E
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Em" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="E" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Em" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Em
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 444.67ms avg
⚡ loadFormData: 253.00ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 4
Active timers: 0
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ema" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Em" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ema" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ema" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Ema" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ema" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
MAIN_SCREEN: build_called
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ema" phone1="0" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Ema" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ema" phone1="0" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ema" phone1="07" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Ema" phone1="0" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ema" phone1="07" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="07" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ema" phone1="072" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Ema" phone1="07" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ema" phone1="072" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="072" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ema" phone1="0721" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Ema" phone1="072" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ema" phone1="0721" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0721" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ema" phone1="0721" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Ema" phone1="0721" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ema" phone1="0721" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
🔵 TEMP_CLIENT: Finalizing client: Ema (0721)
MATCHER: Using clientKey="0721" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
➕ CLIENT: added - 0721 → Ema
🔄 FORM: Temporary client update - ignoring form reset
MAIN_SCREEN: build_called
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: Firebase creation successful
🔵 TEMP_CLIENT: Client finalized successfully
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔄 FORM: Client changed - Previous: , Current: 0721
⚡ FORM: Processing client change - Previous: , Current: 0721
⚡ FORM: Clearing controllers for client change
🔧 FORM_SERVICE: Cleared form data cache for client
🔧 FORM_AREA: Cleared form data cache for previous client
⚡ FORM: Loading form data for new client: 0721
CLIENTS_SERVICE: load_clients_ms | ms=18
🔄 CLIENT: category_change - 0721 → clienti
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔄 FORM: Client changed - Previous: , Current: 0721
⚡ FORM: Skipping redundant client change operation
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 444.67ms avg
⚡ loadFormData: 253.00ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 4
Active timers: 1
✅ [FIREBASE_SUCCESS] getClient found matching client
✅ [FIREBASE_SUCCESS] getClient found matching client
[FIREBASE] GD_VERIFY: getClientForms called for 0721
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔄 FORM: Client changed - Previous: , Current: 0721
⚡ FORM: Skipping redundant client change operation
[FIREBASE] GD_VERIFY: loaded 0 forms for 0721
⚡ FORM: Total client selection time: 217ms
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: No temporary client found in list
MAIN_SCREEN: build_called
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
CALENDAR_METRICS: loadFromCacheInstantly totalMs=0 cacheMs=0 filterMs=0 allMeetings=0 weekMeetings=0
FIREBASE_SERVICE: team_meetings_ms | ms=162, tokens=1
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
SPLASH_SERVICE: refresh_meetings_cache_ms | ms=441
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
CALENDAR_METRICS: loadWeek totalMs=0 fetchMs=0 filter+setStateMs=0 allMeetings=0 weekMeetings=0
🔍 MEETING_DATA: Constructor called
🔍 MEETING_DATA: clientName = "Dani"
🔍 MEETING_DATA: phoneNumber = "0782"
🔍 MEETING_DATA: consultantToken = "f0d98059-254f-4b28-ba55-1f4dd5e9d1dc"
🔍 MEETING_DATA: consultantName = "Ionut"
🔍 MEETING_DATA: dateTime = 2025-08-11 09:30:00.000
🔍 MEETING_DATA: type = MeetingType.meeting
✅ MEETING_DATA: Constructor completed successfully
✅ [FIREBASE_SUCCESS] getClient found matching client
🔄 CLIENT: category_change - 0782 → clienti
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
MATCHER: Using clientKey="0721" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
MAIN_SCREEN: build_called
✅ MEETING_SERVICE: Meeting created successfully | Client: Dani | Date: 2025-08-11 09:30:00.000
🔔 MEETING_SERVICE: Notifying meeting created for consultant: f0d98059 for client: 0782
MEETING_SERVICE: create_meeting_ms | ms=387
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
📈 DASHBOARD_SERVICE: Recording meeting for consultant f0d98059... in 2025-08 for client 0782
DASHBOARD_SERVICE: desktop detected → using non-transactional path for meetings
📱 MEETING_SERVICE: Skipped auto-move client after meeting creation; caches invalidated
FIREBASE_SERVICE: team_meetings_ms | ms=150, tokens=1
CALENDAR_METRICS: filterWeek offset=0 total=1 week=1 filterMs=0
SPLASH_SERVICE: refresh_meetings_cache_ms | ms=227
CALENDAR_METRICS: filterWeek offset=0 total=1 week=1 filterMs=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
CLIENTS_SERVICE: load_clients_ms | ms=3
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
CALENDAR_METRICS: filterWeek offset=0 total=1 week=1 filterMs=0
CALENDAR_METRICS: loadWeek totalMs=148 fetchMs=147 filter+setStateMs=0 allMeetings=1 weekMeetings=1
✅ DASHBOARD_SERVICE: Successfully incremented meetings for consultant in 2025-08
✅ MEETING_SERVICE: Dashboard notified successfully
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loaded 3 teams from cache | isSupervisor: false
[FIREBASE] MEETINGS: getAllMeetings loaded 1 in 86ms
🔍 MEETING_DATA: Constructor called
🔍 MEETING_DATA: clientName = "Ema"
🔍 MEETING_DATA: phoneNumber = "0721"
🔍 MEETING_DATA: consultantToken = "f0d98059-254f-4b28-ba55-1f4dd5e9d1dc"
🔍 MEETING_DATA: consultantName = "Ionut"
🔍 MEETING_DATA: dateTime = 2025-08-15 12:00:00.000
🔍 MEETING_DATA: type = MeetingType.meeting
✅ MEETING_DATA: Constructor completed successfully
✅ [FIREBASE_SUCCESS] getClient found matching client
🔄 CLIENT: category_change - 0721 → clienti
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
MATCHER: Using clientKey="0721" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
MAIN_SCREEN: build_called
✅ MEETING_SERVICE: Meeting created successfully | Client: Ema | Date: 2025-08-15 12:00:00.000
🔔 MEETING_SERVICE: Notifying meeting created for consultant: f0d98059 for client: 0721
MEETING_SERVICE: create_meeting_ms | ms=398
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
📈 DASHBOARD_SERVICE: Recording meeting for consultant f0d98059... in 2025-08 for client 0721
DASHBOARD_SERVICE: desktop detected → using non-transactional path for meetings
📱 MEETING_SERVICE: Skipped auto-move client after meeting creation; caches invalidated
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
CALENDAR_METRICS: loadWeek totalMs=141 fetchMs=141 filter+setStateMs=0 allMeetings=0 weekMeetings=0
FIREBASE_SERVICE: team_meetings_ms | ms=188, tokens=1
CALENDAR_METRICS: filterWeek offset=0 total=2 week=2 filterMs=0
SPLASH_SERVICE: refresh_meetings_cache_ms | ms=263
CALENDAR_METRICS: filterWeek offset=0 total=2 week=2 filterMs=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
CLIENTS_SERVICE: load_clients_ms | ms=0
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 324.40ms avg
⚡ loadFormData: 235.00ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 4
Active timers: 0
✅ DASHBOARD_SERVICE: Successfully incremented meetings for consultant in 2025-08
✅ MEETING_SERVICE: Dashboard notified successfully
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loaded 3 teams from cache | isSupervisor: false
[FIREBASE] MEETINGS: getAllMeetings loaded 2 in 130ms
🔍 MEETING_DATA: Constructor called
🔍 MEETING_DATA: clientName = "Dani"
🔍 MEETING_DATA: phoneNumber = "0782"
🔍 MEETING_DATA: consultantToken = "f0d98059-254f-4b28-ba55-1f4dd5e9d1dc"
🔍 MEETING_DATA: consultantName = "Ionut"
🔍 MEETING_DATA: dateTime = 2025-08-15 12:30:00.000
🔍 MEETING_DATA: type = MeetingType.meeting
✅ MEETING_DATA: Constructor completed successfully
🔄 CLIENT: category_change - 0782 → clienti
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
MATCHER: Using clientKey="0721" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
MAIN_SCREEN: build_called
✅ MEETING_SERVICE: Meeting created successfully | Client: Dani | Date: 2025-08-15 12:30:00.000
🔔 MEETING_SERVICE: Notifying meeting created for consultant: f0d98059 for client: 0782
MEETING_SERVICE: create_meeting_ms | ms=286
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
📈 DASHBOARD_SERVICE: Recording meeting for consultant f0d98059... in 2025-08 for client 0782
DASHBOARD_SERVICE: desktop detected → using non-transactional path for meetings
📱 MEETING_SERVICE: Skipped auto-move client after meeting creation; caches invalidated
✅ DASHBOARD_SERVICE: Successfully incremented meetings for consultant in 2025-08
✅ MEETING_SERVICE: Dashboard notified successfully
FIREBASE_SERVICE: team_meetings_ms | ms=163, tokens=1
CALENDAR_METRICS: filterWeek offset=0 total=3 week=3 filterMs=0
SPLASH_SERVICE: refresh_meetings_cache_ms | ms=227
CALENDAR_METRICS: filterWeek offset=0 total=3 week=3 filterMs=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
CLIENTS_SERVICE: load_clients_ms | ms=0
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
CALENDAR_METRICS: filterWeek offset=0 total=3 week=3 filterMs=0
CALENDAR_METRICS: loadWeek totalMs=152 fetchMs=152 filter+setStateMs=0 allMeetings=3 weekMeetings=3
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loaded 3 teams from cache | isSupervisor: false
[FIREBASE] MEETINGS: getAllMeetings loaded 3 in 80ms
MAIN_SCREEN: build_called
CALENDAR_METRICS: filterWeek offset=0 total=1 week=1 filterMs=0
CALENDAR_METRICS: filterWeek offset=0 total=1 week=1 filterMs=0
CALENDAR_METRICS: filterWeek offset=0 total=1 week=1 filterMs=0
CALENDAR_METRICS: loadWeek totalMs=0 fetchMs=0 filter+setStateMs=0 allMeetings=1 weekMeetings=1
CALENDAR_METRICS: filterWeek offset=0 total=1 week=1 filterMs=0
CLIENTS_SERVICE: load_clients_ms | ms=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
MATCHER: Using clientKey="0721" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
MAIN_SCREEN: build_called
🗑️ CLIENT: removed - 0782 → Dani
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ema
🔵 TEMP_CLIENT: No temporary client found in list
MAIN_SCREEN: build_called
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 295.67ms avg
⚡ loadFormData: 235.00ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 4
Active timers: 0
🤖 LLM_SERVICE: No saved conversation found for consultant: f0d98059...
  - clientCredits: null
  - coDebitorCredits: null
  - clientIncomes: null
  - coDebitorIncomes: null
🤖 LLM_SERVICE: Conversation saved for consultant: f0d98059...
🤖 LLM_SERVICE: Conversation saved for consultant: f0d98059...

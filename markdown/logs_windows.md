Restarted application in 589ms.
UPDATE_SERVICE: initialized | version=0.1.9, dir=D:\Repositories\Broker-App
UPDATE_SERVICE: env_snapshot | cwd=D:\Repositories\Broker-App, exe=D:\Repositories\Broker-App\build\windows\x64\runner\Debug\mat_finance.exe, os="Windows 10 Pro" 10.0 (Build 26100), dart=3.8.1 (stable) (Wed May 28 00:47:25 2025 -0700) on "windows_x64"
🔄 SPLASH_SERVICE: Attempt 1/3 to fetch meetings
CLIENTS_SERVICE: load_clients_ms | ms=36
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/dc1e587d-2147-44ca-8859-4a250cf931d3' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/d739318a-3329-46c5-b055-fab7eb2f485d' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔍 FIREBASE_SERVICE: Fetching team meetings for team: Echipa Andreea
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
👥 FIREBASE_SERVICE: Found 2 consultants in team Echipa Andreea
📦 FIREBASE_SERVICE: Processing chunk 1 with 2 tokens
[FIREBASE] MEETINGS: getAllMeetings loaded 0 in 154ms
📥 FIREBASE_SERVICE: Chunk 1 returned 0 meetings
✅ FIREBASE_SERVICE: Successfully fetched 0 meetings from 1 chunks in 204ms
FIREBASE_SERVICE: team_meetings_ms | ms=204, tokens=2
✅ SPLASH_SERVICE: Successfully fetched 0 meetings on attempt 1 (341ms)
SPLASH_SERVICE: refresh_meetings_cache_ms | ms=341
! SPLASH_SERVICE: No current team set for caching meetings
✅ SPLASH_SERVICE: Successfully refreshed meetings cache: 0 meetings
📊 DASHBOARD_SERVICE: Loaded 3 consultants | isSupervisor: false | Teams excluded: 0
📊 DASHBOARD_SERVICE: Found teams (with base): [Echipa Andreea, Echipa Cristina, Echipa Scarlat]
📊 DASHBOARD_SERVICE: Loaded 3 teams | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loaded 3 teams from cache | isSupervisor: false
[FIREBASE] MEETINGS: getAllMeetings loaded 0 in 303ms
📊 SPLASH_SERVICE: Performance Metrics:
  Initializare servicii...: 11ms
  Preincarcare date...: 2440ms
  Sincronizare servicii...: 21ms
  Optimizare cache...: 1ms
  Finalizare...: 0ms
SPLASH: Current role: Consultant
🔄 SPLASH: Consultant/team changed, resetting state
🔧 SPLASH: Old consultant: null, New: d4bdf2f4-d95a-4937-ac51-2934f015ec5d
🔧 SPLASH: Old team: null, New: Echipa Andreea
🔄 SPLASH: Reloading services for new consultant
📊 DASHBOARD_SERVICE: Loading consultants ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loading teams ranking | isSupervisor: false
📊 DASHBOARD_SERVICE: Loaded 3 teams from cache | isSupervisor: false
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/d4a32e74-fbf5-49cb-bc96-5153f9048764' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
CLIENTS_SERVICE: load_clients_ms | ms=126
[ERROR:flutter/shell/common/shell.cc(1064)] The 'plugins.flutter.io/firebase_firestore/query/0aef935e-06c3-4475-838a-cad83d678fab' channel sent a message from native to Flutter on a non-platform thread. Platform channel messages must be sent on the platform thread. Failure to do so may result in data loss or crashes, and must be fixed in the plugin or application code creating that channel.
See https://docs.flutter.dev/platform-integration/platform-channels#channels-and-platform-threading for more information.
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
[FIREBASE] MEETINGS: getAllMeetings loaded 0 in 134ms
🔄 SPLASH: Invalidating cache with enhanced state management
✅ SPLASH: Cache invalidation completed successfully
✅ SPLASH: Services reloaded successfully for new consultant
✅ SPLASH: Consultant reset completed successfully
MAIN_SCREEN: init_state
MAIN_SCREEN: build_called
ANIM_METRICS: start | label=area_change to AreaType.dashboard
ANIM_METRICS: end | reason=incoming_completed totalMs=1 frames=0 avgBuildMs=0.00 avgRasterMs=0.00 maxBuildMs=0.00 maxRasterMs=0.00 jankBuild=0 jankRaster=0
MAIN_SCREEN: post_frame_callback
MAIN_SCREEN: whats_new_check_start
UPDATE_SERVICE: release_info_missing | path=C:\Users\Home\AppData\Roaming\com.example\MAT Finance/updates/last_release.json
MAIN_SCREEN: whats_new_info_result | is_null=true
MAIN_SCREEN: whats_new_missing
🤖 LLM_SERVICE: Conversation loaded for consultant: d4bdf2f4... (2 messages)
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
ANIM_METRICS: start | label=area_change to AreaType.dashboard
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
CALENDAR_METRICS: loadFromCacheInstantly totalMs=0 cacheMs=0 filterMs=0 allMeetings=0 weekMeetings=0
🔄 SPLASH_SERVICE: Attempt 1/3 to fetch meetings
🔍 FIREBASE_SERVICE: Fetching team meetings for team: Echipa Andreea
👥 FIREBASE_SERVICE: Found 2 consultants in team Echipa Andreea
📦 FIREBASE_SERVICE: Processing chunk 1 with 2 tokens
📥 FIREBASE_SERVICE: Chunk 1 returned 0 meetings
✅ FIREBASE_SERVICE: Successfully fetched 0 meetings from 1 chunks in 156ms
FIREBASE_SERVICE: team_meetings_ms | ms=156, tokens=2
✅ SPLASH_SERVICE: Successfully fetched 0 meetings on attempt 1 (289ms)
SPLASH_SERVICE: refresh_meetings_cache_ms | ms=289
💾 SPLASH_SERVICE: Cached 0 meetings for team Echipa Andreea
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
✅ SPLASH_SERVICE: Successfully refreshed meetings cache: 0 meetings
ANIM_METRICS: end | reason=incoming_completed totalMs=1674 frames=102 avgBuildMs=4.56 avgRasterMs=0.98 maxBuildMs=150.45 maxRasterMs=4.03 jankBuild=5 jankRaster=0
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
📊 SPLASH_SERVICE: Cache status - Age: 0s, Meetings: 0, Stale: false
! SPLASH_SERVICE: Warning - returning 0 meetings
📊 SPLASH_SERVICE: Team: Echipa Andreea, Cache time: 2025-08-22 21:57:04.058337
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
CALENDAR_METRICS: loadWeek totalMs=121 fetchMs=120 filter+setStateMs=0 allMeetings=0 weekMeetings=0
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
📊 SPLASH_SERVICE: Cache status - Age: 0s, Meetings: 0, Stale: false
! SPLASH_SERVICE: Warning - returning 0 meetings
📊 SPLASH_SERVICE: Team: Echipa Andreea, Cache time: 2025-08-22 21:57:04.058337
ANIM_METRICS: start | label=area_change to AreaType.form
🔄 FORM: No focused client at initialization
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
CLIENTS_SERVICE: load_clients_ms | ms=37
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
CALENDAR_METRICS: filterWeek offset=0 total=0 week=0 filterMs=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
CLIENTS_SERVICE: load_clients_ms | ms=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
ANIM_METRICS: end | reason=incoming_completed totalMs=302 frames=20 avgBuildMs=7.59 avgRasterMs=1.46 maxBuildMs=38.91 maxRasterMs=1.83 jankBuild=2 jankRaster=0
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
📊 SPLASH_SERVICE: Cache status - Age: 0s, Meetings: 0, Stale: false
! SPLASH_SERVICE: Warning - returning 0 meetings
📊 SPLASH_SERVICE: Team: Echipa Andreea, Cache time: 2025-08-22 21:57:04.058337
CALENDAR_METRICS: loadWeek totalMs=134 fetchMs=134 filter+setStateMs=0 allMeetings=0 weekMeetings=0
SPLASH: Current role: Consultant
✅ SPLASH: Consultant/team unchanged, no reset needed
📊 SPLASH_SERVICE: Cache status - Age: 0s, Meetings: 0, Stale: false
! SPLASH_SERVICE: Warning - returning 0 meetings
📊 SPLASH_SERVICE: Team: Echipa Andreea, Cache time: 2025-08-22 21:57:04.058337
MAIN_SCREEN: build_called
ANIM_METRICS: start | label=area_change to AreaType.form
🔵 TEMP_CLIENT: createTemporaryClient called
🔵 TEMP_CLIENT: Current focused client before creation: null
🔵 TEMP_CLIENT: Temporary client created with ID: temp_1755889026669
🔵 TEMP_CLIENT: Temporary client focused and added to list
🔵 TEMP_CLIENT: Total clients in list: 1
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client:
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Client changed - Previous: none, Current:
⚡ FORM: Processing client change - Previous: none, Current:
⚡ FORM: Clearing controllers for client change
⚡ FORM: Skipping form data load for temporary client
⚡ FORM: Total client selection time: 1ms
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 281.80ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 3
Active timers: 0
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client:
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="R" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="R" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: R
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Ro" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="R" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Ro" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Ro
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Rob" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Ro" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Rob" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Rob
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Rob" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
[ClientsPopup2] Executing setState in parent after frame
MAIN_SCREEN: build_called
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="0" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="0" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="07" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="0" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="07" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="07" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="077" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="07" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="077" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="077" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="0777" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="077" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="0777" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0777" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 281.80ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 3
Active timers: 0
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="07778" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="0777" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="07778" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="07778" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="077788" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="07778" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="077788" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="077788" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
[ClientsPopup2] Executing setState in parent after frame
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="0777888" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="077788" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="0777888" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0777888" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="07778883" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="0777888" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="07778883" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="07778883" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="077788833" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="07778883" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="077788833" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="077788833" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
MAIN_SCREEN: build_called
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="0777888333" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="077788833" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="0777888333" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
[ClientsPopup2] _onFormChanged triggered, will schedule setState in parent
MATCHER: Using clientKey="0777888333" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
[ClientsPopup2] Executing setState in parent after frame
🔵 TEMP_CLIENT: updateTemporaryClient called with: name="Robi" phone1="0777888333" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: Before update: name="Robi" phone1="0777888333" phone2="null" codebitor="null"
🔵 TEMP_CLIENT: After update: name="Robi" phone1="0777888333" phone2="null" codebitor="null"
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔵 TEMP_CLIENT: notifyListeners() called after updateTemporaryClient
🔵 TEMP_CLIENT: Finalizing client: Robi (0777888333)
MATCHER: Using clientKey="0777888333" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Temporary client update - ignoring form reset
➕ CLIENT: added - 0777888333 → Robi
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔄 FORM: Temporary client update - ignoring form reset
🔵 TEMP_CLIENT: Firebase creation successful
🔵 TEMP_CLIENT: Client finalized successfully
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
🔄 FORM: Client changed - Previous: , Current: 0777888333
⚡ FORM: Processing client change - Previous: , Current: 0777888333
⚡ FORM: Clearing controllers for client change
🔧 FORM_SERVICE: Cleared form data cache for client
🔧 FORM_AREA: Cleared form data cache for previous client
⚡ FORM: Loading form data for new client: 0777888333
CLIENTS_SERVICE: load_clients_ms | ms=0
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔄 CLIENT: category_change - 0777888333 → clienti
🔄 FORM: Client changed - Previous: , Current: none
⚡ FORM: Skipping redundant client change operation
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 281.80ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 3
Active timers: 1
🔄 FORM: Client changed - Previous: , Current: none
⚡ FORM: Skipping redundant client change operation
✅ [FIREBASE_SUCCESS] getClient found matching client
✅ [FIREBASE_SUCCESS] getClient found matching client
[FIREBASE] GD_VERIFY: getClientForms called for 0777888333
[FIREBASE] GD_VERIFY: loaded 0 forms for 0777888333
⚡ FORM: Total client selection time: 245ms
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔄 FORM: Client changed - Previous: 0777888333, Current: none
⚡ FORM: Processing client change - Previous: 0777888333, Current: none
⚡ FORM: Saving form data for previous client: 0777888333
[FIREBASE] FORMS: saveAllFormDataBatched start for 0777888333
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🔄 FORM: Client changed - Previous: 0777888333, Current: none
⚡ FORM: Skipping redundant client change operation
✅ [FIREBASE_SUCCESS] FORMS: saveAllFormDataBatched success for 0777888333 in 169ms
⚡ FORM: Clearing controllers for client change
🔧 FORM_SERVICE: Cleared form data cache for client 0777888333
🔧 FORM_AREA: Cleared form data cache for previous client 0777888333
⚡ FORM: Total client selection time: 171ms
🔵 TEMP_CLIENT: No temporary client found in list
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: null
🎯 CLIENT_SERVICE: Client found at index: 0
🎯 CLIENT_SERVICE: Cleared focus from: Robi
🎯 CLIENT_SERVICE: All focus states cleared
✅ CLIENT_SERVICE: Client focused successfully: 0777888333
✅ CLIENT_SERVICE: New focused client: Robi
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
MATCHER: Using clientKey="0777888333" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🔄 FORM: Client changed - Previous: none, Current: 0777888333
⚡ FORM: Processing client change - Previous: none, Current: 0777888333
⚡ FORM: Clearing controllers for client change
⚡ FORM: Loading form data for new client: 0777888333
⚡ FORM: Total client selection time: 0ms
MAIN_SCREEN: build_called
✅ [FIREBASE_SUCCESS] getClient found matching client
[FIREBASE] GD_VERIFY: getClientForms called for 0777888333
[FIREBASE] GD_VERIFY: loaded 1 forms for 0777888333
DEBUG: Credit type selected: Overdraft
DEBUG: Credit type selected, transforming immediately...
DEBUG: Transforming credit form immediately - Type: Overdraft, IsClient: true
🔧 FORM_SERVICE: Added new credit form while preserving existing forms for client 0777888333
FormService: schedule autosave for 0777888333 in 600ms
DEBUG: Created new credit form with clean state
DEBUG: Resetting credit form selections
DEBUG: Credit selections reset to null
🔧 FORM_AREA: Cleared 0 controllers for 0777888333 client credit
🔧 FORM_AREA: Cleared 0 controllers for 0777888333 coborrower credit
DEBUG: Credit form selections reset
[FIREBASE] FORMS: saveAllFormDataBatched start for 0777888333
🔄 CLIENT: category_change - 0777888333 → clienti
MATCHER: Using clientKey="0777888333" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
✅ [FIREBASE_SUCCESS] FORMS: saveAllFormDataBatched success for 0777888333 in 164ms
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
FormService: commit autosave start for 0777888333
FormService: skip commit (no changes) for 0777888333
DEBUG: Credit type selected: Prima casa
DEBUG: Credit type selected, transforming immediately...
DEBUG: Transforming credit form immediately - Type: Prima casa, IsClient: true
🔧 FORM_SERVICE: Added new credit form while preserving existing forms for client 0777888333
FormService: schedule autosave for 0777888333 in 600ms
DEBUG: Created new credit form with clean state
DEBUG: Resetting credit form selections
DEBUG: Credit selections reset to null
🔧 FORM_AREA: Cleared 0 controllers for 0777888333 client credit
🔧 FORM_AREA: Cleared 0 controllers for 0777888333 coborrower credit
DEBUG: Credit form selections reset
[FIREBASE] FORMS: saveAllFormDataBatched start for 0777888333
🔄 CLIENT: category_change - 0777888333 → clienti
MATCHER: Using clientKey="0777888333" for income cache and lookups
MATCHER: Found income forms client=1, coborrower=1
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
MAIN_SCREEN: build_called
[PERF] PERFORMANCE REPORT:
=====================================
⚡ resetForNewConsultant: 281.80ms avg
⚡ loadFormData: 122.50ms avg
⚡ mainScreenInit: 2.00ms avg
⚡ formAreaInit: 0.00ms avg
=====================================
Total operations tracked: 4
Active timers: 0
✅ [FIREBASE_SUCCESS] FORMS: saveAllFormDataBatched success for 0777888333 in 187ms
🎯 CLIENT_SERVICE: notifyListeners called
🎯 CLIENT_SERVICE: Current focused client: Robi
FormService: commit autosave start for 0777888333
FormService: skip commit (no changes) for 0777888333
